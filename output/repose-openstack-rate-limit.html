<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="/theme/pygments/monokai.min.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/font-awesome.min.css">




    <link rel="shortcut icon" href="images/favicon.jpg" type="image/x-icon">
    <link rel="icon" href="images/favicon.jpg" type="image/x-icon">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />

    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<meta name="author" content="Arun prasath" />
<meta name="description" content="A simple demonstration explaining the use of repose to rate limit Openstack APIs" />
<meta name="keywords" content="Openstack, Architecture, Docker, Repose">
<meta property="og:site_name" content="Arun's blog"/>
<meta property="og:title" content="Repose to rate limit Openstack APIs"/>
<meta property="og:description" content="A simple demonstration explaining the use of repose to rate limit Openstack APIs"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/repose-openstack-rate-limit.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2016-05-01 10:02:00+02:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="/author/arun-prasath.html">
<meta property="article:section" content="Openstack"/>
<meta property="article:tag" content="Openstack"/>
<meta property="article:tag" content="Architecture"/>
<meta property="article:tag" content="Docker"/>
<meta property="article:tag" content="Repose"/>
<meta property="og:image" content="https://avatars2.githubusercontent.com/u/5082801?v=3&s=460">
  <title>Arun's blog &ndash; Repose to rate limit Openstack APIs</title>
</head>
<body>
  <aside>
    <div>
      <a href="">
        <img src="https://avatars2.githubusercontent.com/u/5082801?v=3&s=460" alt="Arun prasath" title="Arun prasath">
      </a>
      <h1><a href="">Arun prasath</a></h1>
<p>Cloud engineer</p>      <nav>
        <ul class="list">
          <li><a href="/pages/my-super-post.html#my-super-post">About me</a></li>
        </ul>
      </nav>
      <ul class="social">
        <li><a class="sc-linkedin" href="http://www.linkedin.com/in/bingoarunprasath" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-github" href="https://github.com/bingoarunprasath" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-facebook" href="https://www.facebook.com/bingoarunprasath" target="_blank"><i class="fa fa-facebook"></i></a></li>
        <li><a class="sc-envelope-o" href="test" target="_blank"><i class="fa fa-envelope-o"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>
    <nav>
      <a href="">Home</a>
      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>
    </nav>

<article>
  <header>
    <h1 id="repose-openstack-rate-limit">Repose to rate limit Openstack APIs</h1>
    <p>Posted on Sun 01 May 2016 in <a href="/category/openstack.html">Openstack</a></p>
  </header>
  <div>
    <p>Repose is an opensource middle ware tool to manipulate, authenticate, rate limit, validate, HTTP request logging and many more operations to the incoming API requests from the client to the API service.The service itself has REST based interface to perform operations. It obviously is highly scalable and extensible.</p>
<p>It enables the API servers to trust incoming API calls as validated and well formed. It can take incoming API requests and adjusts them to be validated for consumption by passing the API calls through a set of filters. It also limits the API requests so as to avoid high load in API servers.</p>
<p><img alt="alt text" src="images/openstack-repose/repose_generic_api.png" title="Respose generic" /></p>
<h1>Repose in Openstack ecosystem</h1>
<p>Repose is quite useful in Openstack environments to process the API requests received by the Openstack clients. In medium level Openstack installation, is is common to have a all the services installed on a single node (usually called controller node) and in some big Openstack environments, all the services are installed on dedicated server(s) and are load balanced by some load balancer (usually haproxy). Even in such big clusters, with more than one node serving a single Openstack service, there is a high chance that the number of API request for a particular service gets high and the server load gets increased and in worst case the server might be crashed. With Openstack deployments getting bigger and there are different kind of tools sitting around it, from billing reports to customer heat, ansible, vagrant or terraform scripts and tons of other tool which can make a huge number of calls to API services, it might not be a wonder if the server crashes because of the API calls.</p>
<h1>Repose to the rescue</h1>
<p>Repose offers a solution mainly to the problem addressed above and also offers many other features with respect to the API calls. On quick look we just can’t put a single filter to all the different Openstack services. Glance API might not be invoked on a larger scale, whereas a keystone API calls might be a relatively huge number and not all API calls consume same amount of memory, a neutron API call may use less memory and a ceilometer call may use more memory. With these kind of complexity, we need some advanced filters which can modify and tweak API calls in a granular level. Repose provides a robust solution to this problem.</p>
<h1>Setting up Repose to test Glance API</h1>
<p>In this blog let us setup a quick repose service to rate limit the Glance API.</p>
<p>I have a testing Openstack environment. (I used a Packstack intallation in this case)</p>
<div class="highlight"><pre><span></span>[root@packstack repose(keystone_admin)]# openstack service list
+----------------------------------+------------+--------------+
| ID                               | Name       | Type         |
+----------------------------------+------------+--------------+
| 30aeedda17b34e35b27e23d9f9d44fd2 | swift      | object-store |
| 4bc0bfc7483a4838a20c5e38a454f597 | cinder     | volume       |
| 59e68fbe791f4372b14d296cda351c1a | neutron    | network      |
| 5e7c5b873f304d37884afd65fb632b92 | swift_s3   | s3           |
| 680d7bf86e9e442687afb7636117dbdf | novav3     | computev3    |
| 921547e706ae4929a6df1e29eb3a20a1 | nova       | compute      |
| aa39d2b920b9497883754a6ad8e548d9 | keystone   | identity     |
| b50f55825fd54522863d3896427405ee | cinderv2   | volumev2     |
| c553b014d9f244a3aa2bfe212a4e3ab5 | nova_ec2   | ec2          |
| cc4cb5d61dc141849d7f69184b5eb797 | ceilometer | metering     |
| dce6182659fe46659de7c50539b0c0c4 | glance     | image        |
+----------------------------------+------------+--------------+
</pre></div>


<p>Glance endpoint –</p>
<div class="highlight"><pre><span></span>[root@packstack repose(keystone_admin)]# keystone endpoint-list | grep `keystone service-list  | grep glance | awk &#39;{print $2}&#39; `
| f324d78eccee4deb9e78f4c15f60081f | RegionOne |            http://10.0.0.37:9292            |            http://10.0.0.37:9292            |         http://10.0.0.37:9292          | dce6182659fe46659de7c50539b0c0c4 |
Create necessary files and folder
</pre></div>


<h2>Create necessary files and folder</h2>
<p>Create Docker file</p>
<div class="highlight"><pre><span></span>[root@packstack repose(keystone_admin)]# cat Dockerfile 
# Dockerfile for Repose (www.openrepose.org)

FROM ubuntu

RUN apt-get update -y 
RUN apt-get install -y wget
RUN wget -O - http://repo.openrepose.org/debian/pubkey.gpg | apt-key add - &amp;&amp; echo &quot;deb http://repo.openrepose.org/debian stable main&quot; &gt; /etc/apt/sources.list.d/openrepose.list
RUN apt-get update &amp;&amp; apt-get install -y repose-valve repose-filter-bundle repose-extensions-filter-bundle

# Remove default Repose configuration files
RUN rm /etc/repose/*.cfg.xml

# Copy our configuration files in.
ADD ./repose_configs/*.cfg.xml /etc/repose/

# Start Repose
CMD java -jar /usr/share/repose/repose-valve.jar
</pre></div>


<p>In the same directory as Dockerfile create a folder named ‘repose_configs’ and create the following two files.</p>
<div class="highlight"><pre><span></span>[root@packstack repose(keystone_admin)]# cat repose_configs/system-model.cfg.xml 
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="c">&lt;!-- To configure Repose see: http://wiki.openrepose.org/display/REPOSE/Configuration --&gt;</span>
<span class="nt">&lt;system-model</span> <span class="na">xmlns=</span><span class="s">&quot;http://docs.openrepose.org/repose/system-model/v2.0&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;repose-cluster</span> <span class="na">id=</span><span class="s">&quot;repose&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;nodes&gt;</span>
            <span class="nt">&lt;node</span> <span class="na">id=</span><span class="s">&quot;repose_packstack&quot;</span> <span class="na">hostname=</span><span class="s">&quot;localhost&quot;</span> <span class="na">http-port=</span><span class="s">&quot;19292&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/nodes&gt;</span>
        <span class="nt">&lt;filters&gt;</span>
            <span class="nt">&lt;filter</span> <span class="na">name=</span><span class="s">&quot;rate-limiting&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/filters&gt;</span>
        <span class="nt">&lt;services&gt;</span>
        <span class="nt">&lt;/services&gt;</span>
        <span class="nt">&lt;destinations&gt;</span>
            <span class="nt">&lt;endpoint</span> <span class="na">id=</span><span class="s">&quot;packstack&quot;</span> <span class="na">protocol=</span><span class="s">&quot;http&quot;</span> <span class="na">hostname=</span><span class="s">&quot;10.0.0.37&quot;</span> <span class="na">root-path=</span><span class="s">&quot;/&quot;</span> <span class="na">port=</span><span class="s">&quot;9292&quot;</span> <span class="na">default=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/destinations&gt;</span>
    <span class="nt">&lt;/repose-cluster&gt;</span>


    <span class="c">&lt;!-- Please set the enabled attribute to true to send us usage updates and help us improve Repose! --&gt;</span>
    <span class="nt">&lt;phone-home</span> <span class="na">enabled=</span><span class="s">&quot;false&quot;</span>
                <span class="na">origin-service-id=</span><span class="s">&quot;your-service&quot;</span>
                <span class="na">contact-email=</span><span class="s">&quot;your@service.com&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/system-model&gt;</span>
</pre></div>


<div class="highlight"><pre><span></span>[root@packstack repose(keystone_admin)]# cat repose_configs/rate-limiting.cfg.xml 
<span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="c">&lt;!-- http://wiki.openrepose.org/display/REPOSE/Rate+Limiting+Filter --&gt;</span>
<span class="nt">&lt;rate-limiting</span> <span class="na">xmlns=</span><span class="s">&quot;http://docs.openrepose.org/repose/rate-limiting/v1.0&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!--</span>
<span class="c">        Defines an endpoint with a matching regex to bind GET requests for</span>
<span class="c">        returning live rate limiting information.</span>
<span class="c">    --&gt;</span>
    <span class="nt">&lt;request-endpoint</span> <span class="na">uri-regex=</span><span class="s">&quot;&quot;</span> <span class="na">include-absolute-limits=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;global-limit-group&gt;</span>
        <span class="nt">&lt;limit</span> <span class="na">id=</span><span class="s">&quot;global&quot;</span> <span class="na">uri=</span><span class="s">&quot;*&quot;</span> <span class="na">uri-regex=</span><span class="s">&quot;.*&quot;</span> <span class="na">value=</span><span class="s">&quot;1000&quot;</span> <span class="na">unit=</span><span class="s">&quot;MINUTE&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/global-limit-group&gt;</span>
    <span class="c">&lt;!-- Limits for all other requests --&gt;</span>
    <span class="nt">&lt;limit-group</span> <span class="na">id=</span><span class="s">&quot;limited&quot;</span> <span class="na">groups=</span><span class="s">&quot;limited&quot;</span> <span class="na">default=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;limit</span> <span class="na">id=</span><span class="s">&quot;all&quot;</span> <span class="na">uri=</span><span class="s">&quot;/v2/images&quot;</span> <span class="na">uri-regex=</span><span class="s">&quot;/v2/images&quot;</span> <span class="na">http-methods=</span><span class="s">&quot;GET&quot;</span> <span class="na">unit=</span><span class="s">&quot;MINUTE&quot;</span> <span class="na">value=</span><span class="s">&quot;5&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/limit-group&gt;</span>
    <span class="c">&lt;!-- Limits for WhiteListed IPs --&gt;</span>
    <span class="nt">&lt;limit-group</span> <span class="na">id=</span><span class="s">&quot;unlimited&quot;</span> <span class="na">groups=</span><span class="s">&quot;unlimited&quot;</span> <span class="na">default=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/rate-limiting&gt;</span>
</pre></div>


<p>In the rate-limiting file we mentioned that glance get request can accept only 5 request / minute.</p>
<p>Also the following 3 files in the repose_configs folder</p>
<p>https://raw.githubusercontent.com/rackerlabs/repose/master/repose-aggregator/installation/configs/core/container.cfg.xml</p>
<p>https://raw.githubusercontent.com/rackerlabs/repose/master/repose-aggregator/installation/configs/core/log4j2.xml</p>
<p>https://raw.githubusercontent.com/rackerlabs/repose/master/repose-aggregator/installation/configs/core/log4j2.xml</p>
<p>or you can simply clone all the files from</p>
<div class="highlight"><pre><span></span>$ git clone https://github.com/bingoarunprasath/glance-docker-test-repose.git
</pre></div>


<div class="highlight"><pre><span></span>[root@packstack repose(keystone_admin)]# ls
Dockerfile  repose_configs
[root@packstack repose(keystone_admin)]# ls repose_configs/
container.cfg.xml  log4j2.xml  rate-limiting.cfg.xml  response-messaging.cfg.xml  system-model.cfg.xml
</pre></div>


<p>Build the docker image</p>
<div class="highlight"><pre><span></span>[root@packstack repose(keystone_admin)]# sudo docker build -t glance_repose .
</pre></div>


<p>Run the Docker container</p>
<div class="highlight"><pre><span></span>[root@packstack repose(keystone_admin)]# docker run -i   -d -t -p 19292:19292   glance_repose
</pre></div>


<p>Do a glance image list on the repose port.</p>
<div class="highlight"><pre><span></span><span class="err">#</span> <span class="nt">curl</span> <span class="nt">-g</span> <span class="nt">-i</span> <span class="nt">-X</span> <span class="nt">GET</span> <span class="nt">http</span><span class="o">://</span><span class="nt">localhost</span><span class="nd">:19292</span><span class="o">/</span><span class="nt">v2</span><span class="o">/</span><span class="nt">images</span> <span class="nt">-H</span> <span class="s2">&quot;X-Auth-Token: 72b77be2949b476ca8cae5efb3c3b0b9&quot;</span> <span class="nt">-H</span> <span class="s2">&quot;x-pp-user: admin&quot;</span>
<span class="nt">HTTP</span><span class="o">/</span><span class="nt">1</span><span class="nc">.1</span> <span class="nt">200</span> <span class="nt">OK</span>
<span class="nt">Date</span><span class="o">:</span> <span class="nt">Sat</span><span class="o">,</span> <span class="nt">27</span> <span class="nt">Feb</span> <span class="nt">2016</span> <span class="nt">13</span><span class="nd">:21:18</span> <span class="nt">GMT</span>
<span class="nt">Via</span><span class="o">:</span> <span class="nt">1</span><span class="nc">.1</span> <span class="nt">Repose</span> <span class="o">(</span><span class="nt">Repose</span><span class="o">/</span><span class="nt">7</span><span class="nc">.3.2.0</span><span class="o">)</span>
<span class="nt">X-Openstack-Request-Id</span><span class="o">:</span> <span class="nt">req-a458c22c-0764-4745-8554-605fbfb74108</span>
<span class="nt">Date</span><span class="o">:</span> <span class="nt">Sat</span><span class="o">,</span> <span class="nt">27</span> <span class="nt">Feb</span> <span class="nt">2016</span> <span class="nt">13</span><span class="nd">:21:18</span> <span class="nt">GMT</span>
<span class="nt">x-trans-id</span><span class="o">:</span> <span class="nt">eyJyZXF1ZXN0SWQiOiI0NGE0ODYzOC0zZmZhLTQ5MzMtODk5Zi05NjFjZjJhNjE5MGMiLCJvcmlnaW4iOm51bGx9</span>
<span class="nt">Content-Type</span><span class="o">:</span> <span class="nt">application</span><span class="o">/</span><span class="nt">json</span><span class="o">;</span> <span class="nt">charset</span><span class="o">=</span><span class="nt">UTF-8</span>
<span class="nt">Content-Length</span><span class="o">:</span> <span class="nt">653</span>
<span class="nt">Server</span><span class="o">:</span> <span class="nt">Jetty</span><span class="o">(</span><span class="nt">9</span><span class="nc">.2.z-SNAPSHOT</span><span class="o">)</span>

<span class="p">{</span><span class="s2">&quot;images&quot;</span><span class="o">:</span> <span class="cp">[</span><span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;cirros&quot;</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="err">[</span><span class="cp">]</span><span class="o">,</span> <span class="s2">&quot;container_format&quot;</span><span class="o">:</span> <span class="s2">&quot;bare&quot;</span><span class="o">,</span> <span class="s2">&quot;created_at&quot;</span><span class="o">:</span> <span class="s2">&quot;2016-02-27T09:47:40Z&quot;</span><span class="o">,</span> <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="m">13200896</span><span class="o">,</span> <span class="s2">&quot;disk_format&quot;</span><span class="o">:</span> <span class="s2">&quot;qcow2&quot;</span><span class="o">,</span> <span class="s2">&quot;updated_at&quot;</span><span class="o">:</span> <span class="s2">&quot;2016-02-27T09:47:54Z&quot;</span><span class="o">,</span> <span class="s2">&quot;visibility&quot;</span><span class="o">:</span> <span class="s2">&quot;public&quot;</span><span class="o">,</span> <span class="s2">&quot;self&quot;</span><span class="o">:</span> <span class="s2">&quot;/v2/images/08c19039-8f5c-4eeb-8989-c0215856c5f2&quot;</span><span class="o">,</span> <span class="s2">&quot;min_disk&quot;</span><span class="o">:</span> <span class="m">0</span><span class="o">,</span> <span class="s2">&quot;protected&quot;</span><span class="o">:</span> <span class="n">false</span><span class="o">,</span> <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;08c19039-8f5c-4eeb-8989-c0215856c5f2&quot;</span><span class="o">,</span> <span class="s2">&quot;file&quot;</span><span class="o">:</span> <span class="s2">&quot;/v2/images/08c19039-8f5c-4eeb-8989-c0215856c5f2/file&quot;</span><span class="o">,</span> <span class="s2">&quot;checksum&quot;</span><span class="o">:</span> <span class="s2">&quot;133eae9fb1c98f45894a4e60d8736619&quot;</span><span class="o">,</span> <span class="s2">&quot;owner&quot;</span><span class="o">:</span> <span class="s2">&quot;fdec1896f95447b79a66a10ee06db4ca&quot;</span><span class="o">,</span> <span class="s2">&quot;virtual_size&quot;</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span> <span class="s2">&quot;min_ram&quot;</span><span class="o">:</span> <span class="m">0</span><span class="o">,</span> <span class="s2">&quot;schema&quot;</span><span class="o">:</span> <span class="s2">&quot;/v2/schemas/image&quot;</span><span class="p">}</span><span class="o">],</span> <span class="s2">&quot;schema&quot;</span><span class="o">:</span> <span class="s2">&quot;/v2/schemas/images&quot;</span><span class="o">,</span> <span class="s2">&quot;first&quot;</span><span class="o">:</span> <span class="s2">&quot;/v2/images&quot;</span><span class="err">}</span><span class="cp">[</span><span class="nx">root</span><span class="p">@</span><span class="nx">packstack</span> <span class="nx">repose</span><span class="p">(</span><span class="nx">keystone_admin</span><span class="p">)</span><span class="cp">]</span>
</pre></div>


<p>Note: We are adding an additional header ‘x-pp-user’ for repose rate limit feature to work. This header will be added automatically when we have keystone integrated with openrepose.</p>
<p>Refer – https://repose.atlassian.net/wiki/display/REPOSE/Keystone+v2+Filter</p>
<p>Test if rate limit is working</p>
<p>some quick script –</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nv">OUT_FILE</span><span class="o">=</span><span class="s2">&quot;repose-curl.out&quot;</span>
rm -f <span class="nv">$OUT_FILE</span>
touch <span class="nv">$OUT_FILE</span>
<span class="k">for</span> i in <span class="o">{</span>1..10<span class="o">}</span> <span class="p">;</span> <span class="k">do</span>
  <span class="nb">echo</span> -en <span class="s2">&quot;\n\n~~~~~ Attempt #</span><span class="nv">$i</span><span class="s2"> ~~~~~\n\n&quot;</span> &gt;&gt; <span class="nv">$OUT_FILE</span>
  curl -g -i -X GET http://localhost:19292/v2/images -H <span class="s2">&quot;X-Auth-Token: 72b77be2949b476ca8cae5efb3c3b0b9&quot;</span> -H <span class="s2">&quot;x-pp-user: admin&quot;</span> &gt;&gt; <span class="nv">$OUT_FILE</span> 2&gt;<span class="p">&amp;</span>1
<span class="k">done</span>
</pre></div>
</td></tr></table>

<p>In the output file it is observed that only 5 request were succeeded and the rest for into error as shown below.</p>
<div class="highlight"><pre><span></span># curl -g -i -X GET http://localhost:19292/v2/images -H &quot;X-Auth-Token: 72b77be2949b476ca8cae5efb3c3b0b9&quot; -H &quot;x-pp-user: admin&quot;
HTTP/1.1 413 Request Entity Too Large
Date: Sat, 27 Feb 2016 13:32:13 GMT
Retry-After: Sat, 27 Feb 2016 13:33:07 GMT
Content-Type: application/json
Via: 1.1 Repose (Repose/7.3.2.0)
x-trans-id: eyJyZXF1ZXN0SWQiOiJjOWNjMGQ3My1jMDhiLTQ5ZTMtODJlZC03NjMwZmVkODU4NWIiLCJvcmlnaW4iOm51bGx9
Content-Length: 223
Server: Jetty(9.2.z-SNAPSHOT)

{
            &quot;overLimit&quot; : {
            &quot;code&quot; : 413,
            &quot;message&quot; : &quot;OverLimit Retry...&quot;,
            &quot;details&quot; : &quot;Error Details...&quot;,
            &quot;retryAfter&quot; : &quot;2016-02-27T13:33:07Z&quot;
            }
}
</pre></div>


<p>Voila !!</p>
<p>The above is just a very simple use case of repose.</p>
<p>A typical production environment would look some thing like this –</p>
<p><img alt="alt text" src="images/openstack-repose/openstack-prod-repose-ha.png" title="Sample Repose in production" /></p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="/tag/openstack.html">Openstack</a>
      <a href="/tag/architecture.html">Architecture</a>
      <a href="/tag/docker.html">Docker</a>
      <a href="/tag/repose.html">Repose</a>
    </p>
  </div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'bingoarunprasath';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</article>

    <footer>
        <p>&copy; Arun prasath 2016</p>
<p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78404732-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "name": "Repose to rate limit Openstack APIs",
  "headline": "Repose to rate limit Openstack APIs",
  "datePublished": "2016-05-01 10:02:00+02:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Arun prasath",
    "url": "/author/arun-prasath.html"
  },
  "image": "https://avatars2.githubusercontent.com/u/5082801?v=3&s=460",
  "url": "/repose-openstack-rate-limit.html",
  "description": "A simple demonstration explaining the use of repose to rate limit Openstack APIs"
}
</script></body>
</html>